# MVC 패턴

MVC 패턴은 디자인 패턴이다.

어플리케이션, 프로젝트를 구성할 때 구성요소를 Model(데이터), View(화면), Controller(컨트롤러)로 나누어서 각자의 역할로 구분한 패턴이다.



### WHAT?



#### Model 

데이터를 가진 객체를 모델이라고 지칭한다.

데이터는 내부의 상태에 대한 정보를 가질 수도 있고, 모델을 표현하는 이름 속성으로 가질 수 있다. 

모델의 상태에 변화가 있을 때 컨트롤러와 뷰에 이를 통보한다. 이와 같은 통보를 통해 뷰는 최신의 결과를 보여줄 수 있고, 컨트롤러는 모델의 변화에 따른 적용 가능한 명령을 추가, 제거, 수정할 수 있다.

- 사용자가 편집하길 원하는 모든 데이터를 가지고 있어야만 함

- 뷰나 컨트롤러에 대해서 어떠한 정보도 알지 말아야 함

- 변경이 일어나면, 변경 통지에 대한 처리방법을 구현해야 함

  ​

#### View

화면에 표시되는 부분, 사용자에게 보여지는 부분.

컨트롤러로부터 받은 모델의 결과값을 가지고 사용자에게 출력할 화면을 만드는 일을 한다. 

만들어진 화면을 웹브라우저에 전송하여 웹브라우저가 출력하게 하는 것이다. 화면에 표시되는 부분으로 추출한 데이터나 일반적인 텍스트 데이터를 표시하거나 입력폼 또는 사용자와의 상호작용을 위한 인터페이스를 표시하는 영역이다.

- 모델이 가지고 있는 정보를 따로 저장해서는 안됨

- 모델이나 컨트롤러와 같이 다른 구성 요소를 몰라야 함

- 변경이 일어나면, 변경 통지에 대한 처리방법을 구현해야 함

  ​

#### Controller

모델과 뷰를 연결해 주는 역할을 한다. 

클라이언트의 요청을 받았을 때, 그 요청에대해 실제 업무를 수행하는 모델 컴포넌트를 호출한다. 또한 클라이언트가 보낸 데이터가 있다면, 모텔에 전달하기 쉽게 데이터를 가공한다. 모델이 업무를 마치면 그 결과를 뷰에게 전달한다.

- 모델이냐 뷰에 대해서 알고 있어야 함
- 모델이나 뷰의 변경을 모니터링해야 함

------



### WHY?



기본적으로 좀 더 쉽고 편리하게 개발하기 위함

Model(데이터), View(화면), Controller(컨트롤러)로 나누어서 각각 맡은 부분에 집중하여 개발 할 수 있다.

컴포넌트의 변경이 다른 영역 컴포넌트에 영향을 미치지 않아 유지보수가 용이해 진다.

컴포넌트간의 결합성이 낮아 프로그램 수정이 용이하고 확장성이 뛰어나다.

즉, **MVC 패턴을 활용해 개발 한다면 유지보수성, 확장성, 유연성이 상승한다 .**

------



### HOW?

![MVC](C:\cs-study\MVC\MVC.JPG)

*C/S(Client - Server)구조로 요청을 하면 그에 맞는 응답을 하는 구조를 기본으로 하고 있다.*

1. 웹 브라우저가 웹 서버에 웹 애플리케이션 실행을 요청한다. (MVC 구조가 WAS라고 보면 된다.)


2. 웹 서버는 들어온 요청을 처리할 수 있는 서블릿을 찾아서 요청을 전달한다.(Matching)


3. 서블릿은 모델 자바 객체의 메서드를 호출한다.
4. 데이터를 가공하여 값 객체를 생성하거나, JDBC를 사용하여 데이터베이스와의 인터랙션을 통해 값 객체를 생성한다.
5. 업무 수행을 마친 결과값을 컨트롤러에게 반환한다.
6. 컨트롤러는 모델로부터 받은 결과값을 View에게 전달한다.
7. JSP는 전달받은 값을 참조하여 출력할 결과 화면을 만들고 컨트롤러에게 전달한다.
8. 뷰로부터 받은 화면을 웹 서버에게 전달한다.
9. 웹 브라우저는 웹 서버로부터 요청한 결과값을 응답받으면 그 값을 화면에 출력한다.

------



### BUT

MVC에서 View는 Controller에 연결되어 화면을 구성하는 단위 요소이므로 다수의 View들을 가질 수 있다.
그리고 Model은 Controller를 통해서 View와 연결되지만, 이렇게 Controller를 통해서 하나의 View에 연결될 수 있는 Model도 여러 개가 될 수 있다.

즉, 화면에 복잡한 화면과 데이터의 구성 필요한 구성이라면, Controller에 다수의 Model과 View가 복잡하게 연결되어 있는 상황이 생길 수 있다.

MVC가 너무 복잡하고 비대해져서 새 기능을 추가할 때마다 크고 작은 문제점을 가지고 소드 분석이나 테스트도 더 어려워지는데 이런 형태의 MVC를 **Massive-View-Controller라고** 부르기도 한다.

Controller는 View와 라이프 사이클과 강하게 연결되어있어서 분리할 수도 없고 코드 분석/수정과 테스트가 모두 힘들어진다. 그리고 복잡하게 엮어있는 Model과 View는 여러 Side-Effect를 불러와 프로그램 운영을 힘들게 한다.



💡 그래서 이 문제점을 보완한 여러 다양한 패턴들(MVP, MVVM, Viper, Clean Architecture, Flux, Redux, RxMVVM 등)이 있다.

------



### PLUS

MVC 패턴에는 모델 1 방식과 모델 2 방식이 있다.

- **모델 1 방식: JSP에서 출력과 로직을 전부 처리**
- **모델 2 방식: JSP에서 출력만 처리**







예상 질문 

MVC 패턴이란? 

Model View, Controller 각각의 역할은?

MVC 패턴의 구동원리는?

MVC 패턴을 왜 사용하는지? (장점)

