# CS study : 07 NoSQL

> [Interview_Question_for_Beginner](https://github.com/JaeYeopHan/Interview_Question_for_Beginner)/**Database**/
>
> [tech-interview-for-developer/Computer Science/Database/SQL vs NoSQL](https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Database/SQL%EA%B3%BC%20NOSQL%EC%9D%98%20%EC%B0%A8%EC%9D%B4.md)

- 위 repository 를 읽고 정리한 글입니다.

## NoSQL 

### 정의 

>(1)
>
>- 관계형 데이터 모델을 ***지양*** 하며 
>- 대량의 분산된 데이터를 저장하고 조회하는 데 특화되었으며 
>- 스키마 없이 사용 가능하거나 느슨한 스키마를 제공하는 저장소를 말한다.
>
>
>
>(2) 
>
>- 특정 데이터 모델에 대해 특정 목적에 맞추어 구축되는 데이터베이스로서 현대적인 애플리케이션 구축을 위한 유연한 스키마를 갖추고 있습니다. 
>
>(3)
>
>- NoSQL 데이터베이스(일명 "SQL만을 사용하지 않는 데이터베이스")는 표 형식이 아니며, 관계형 테이블과는 다른 방식으로 데이터를 저장합니다. NoSQL 데이터베이스는 데이터 모델에 따라 유형이 다양합니다. 주요 유형으로는 문서, 키 값, 와이드 컬럼, 그래프가 있습니다. 이들은 유연한 스키마를 제공하며, 대량의 데이터와 높은 사용자 부하에서도 손쉽게 확장이 가능합니다.



### 특징 

#### CAP 이론 

![Diagram of CAP Theorem](http://eincs.com/images/2013/06/truth-of-cap-theorem-diagram.png)

분산형 구조는 아래 3가지 특징을 가지고 있으며, CAP 이론은 이 중 2가지만 만족할 수 있다는 이론이다. 

NoSQL 은 대부분 CAP 이론을 따른다. 

1. 일관성(Consistency) : 
   - 분산된 노드 중 어느 노드로 접근하더라도 데이터 값이 같아야 한다.
2. 가용성(Availability)
   - 클러스터링된 노드 중 하나 이상의 노드가 실패(Fail)라도 정상적으로 요청을 처리할 수 있는 기능을 제공한다.
3. 네트워크 분할 허용성(Partition tolerance)
   - 클러스터링 노드 간에 통신하는 네트워크가 장애가 나더라도 정상적으로 서비스를 수행한다. 노드 간 물리적으로 전혀 다른 네트워크공간에 위치도 가능하다.



### 유형

1. Key-Value Model

   - 가장 기본적인 형태의 NoSQL 이며 키 하나로 데이터 하나를 저장하고 조회할 수 있는 단일 키-값 구조를 갖는다.
   - 단순한 저장구조로 인하여 복잡한 조회 연산을 지원하지 않는다. 또한 고속 읽기와 쓰기에 최적화된 경우가 많다. 
   - 캐싱, 사용자의 프로필 정보, 웹 서버 클러스터를 위한 세션 정보, 장바구니 정보, URL 단축 정보 저장 등에 사용한다

   - DynamoDB, Redis 

2. Document Model

   - 키-값 모델을 개념적으로 확장한 구조로 하나의 키에 하나의 구조화된 문서를 저장하고 조회
     - JSON(JavaScript Object Notation) 객체와 비슷한 문서에 데이터를 저장
     - 일반적으로 값은 문자열, 숫자, 불리언(boolean), 어레이, 객체 등 유형이 다양할 수 있으며, 구조는 개발자가 코드에서 사용하고 있는 객체에 맞춰 조정

   - 개발자들이 자신의 애플리케이션 코드에서 사용하는 것과 동일한 문서 모델 형식을 사용하여, 손쉽게 데이터를 저장하고 쿼리 가능
   - 유연하고 반구조화된 계층적 특성을 통해 개발자는 계속해서 애플리케이션의 요구를 발전 가능
   - 중앙 집중식 로그 저장, 타임라인 저장, 통계 정보 저장 등에 사용
   - MongoDB 

    

3. Column Model

   - 하나의 키에 여러 개의 컬럼 이름과 컬럼 값의 쌍으로 이루어진 데이터를 저장하고 조회한다. 모든 컬럼은 항상 타임 스탬프 값과 함께 저장된다.
     - 각 행이 동일한 열을 가질 필요가 없다는 점에서 관계형 데이터베이스에 대해 뛰어난 유연성을 제공

   - 대부분의 컬럼 모델 NoSQL 은 쓰기와 읽기 중에 쓰기에 더 특화되어 있다. 
     - 데이터를 먼저 커밋로그와 메모리에 저장한 후 응답하기 때문에 빠른 응답속도를 제공한다. 그렇기 때문에 읽기 연산 대비 쓰기 연산이 많은 서비스나 빠른 시간 안에 대량의 데이터를 입력하고 조회하는 서비스를 구현할 때 가장 좋은 성능을 보인다. 
     - 채팅 내용 저장, 실시간 분석을 위한 데이터 저장소 등의 서비스 구현에 적합하다.
   - Cassandra, HBase 

4. Graph Model 

   - 노드와 엣지에 데이터를 저장
     - 노드에는 일반적으로 사람, 장소 및 사물에 대한 정보가 저장되고, 에지에는 노드 간의 관계에 대한 정보가 저장
   - 소셜 네트워크, 추천 엔진, 사기 탐지, 같은 패턴을 찾아보기 위해 관계를 상세히 검토해야 하는 사용 사례에 적합
   - Neo4j, JanusGraph 



## etc

### CAP 이론?

[CAP Theorem, 오해와 진실](http://eincs.com/2013/07/misleading-and-truth-of-cap-theorem/)

### NoSQL 배경

[NoSQL 이란](https://www.mongodb.com/ko-kr/nosql-explained)

>NoSQL 데이터베이스는 2000년대 말에 스토리지 비용이 크게 하락하면서 등장했습니다. 단순히 데이터 중복 감소를 목적으로 복잡하고 관리가 어려운 데이터 모델을 생성해야 하던 시절은 이제 지났습니다. 스토리지가 아니라 개발자들이 소프트웨어 개발의 1차 비용이 되었기 때문에 NoSQL 데이터베이스는 ***개발자 생산성에 맞게 최적화***되었습니다.
>
>저장 및 쿼리를 위해 필요한 데이터 애플리케이션의 양도 증가했습니다. 이러한 데이터는 정형, 반정형, 다형적 등 모양과 크기가 모두 다르기 때문에 미리 스키마를 정의하는 것이 거의 불가능해졌습니다. NoSQL 데이터베이스는 개발자가 ***엄청난 양의 비정형 데이터를 저장할 수 있도록 지원하여 뛰어난 유연성을 제공***합니다.
>
>뿐만 아니라, [Agile Manifesto](https://agilemanifesto.org/)의 인기가 높아지면서 소프트웨어 개발자들은 소프트웨어 개발 방식을 재고하기 시작했습니다. 그리고 변화하는 요구사항에 발 빠르게 적응해야 할 필요가 있음을 인식했습니다. 이들에게는 데이터베이스 모델에 이르기까지 소프트웨어 스택 전반에서 반복 작업과 변경을 신속하게 수행할 수 있는 능력이 필요했습니다. NoSQL 데이터베이스는 개발자들에게 이러한 유연성을 제공했습니다.
>
>클라우드 컴퓨팅 역시 인기가 높아졌고, 개발자들은 퍼블릭 클라우드를 사용해 애플리케이션과 데이터를 호스팅하기 시작했습니다. 이들은 여러 서버와 리전에 데이터를 분산시켜 애플리케이션 복원력을 높이고, 스케일업이 아닌 스케일아웃을 수행하며, 데이터를 지능적으로 배치할 수 있기를 원했습니다. MongoDB 같은 일부 NoSQL 데이터베이스들은 이러한 기능을 제공하고 있습니다.

