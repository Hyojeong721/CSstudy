## 데이터베이스

### 데이터베이스 관리 시스템 (DBMS, DataBaseManagementSystem)

데이터베이스 관리 시스템이란 `다수의 사용자들`이 데이터베이스 내의 `데이터를 접근할 수 있도록 해주는 소프트웨어들`을 의미한다.
데이터베이스 관리 시스템이 존재하기 이전에는 파일 시스템을 이용하여 데이터를 관리하였다.
파일 시스템은 응용 프로그램을 이용해 데이터를 파일로 관리하는 것이다.
예를 들어, 쇼핑몰의 경우 고객 관리 프로그램과 주문 관리 프로그램이 존재하여 각각 데이터를 파일로 저장해 관리한다. 파일을 기반으로 데이터를 관리하게 되면 데이터 중복, 데이터 불일치 등 문제가 발생한다.
이러한 파일 시스템의 단점을 보완하기 위해 데이터베이스가 생겨났다.
`데이터베이스`는 곧 `데이터베이스 관리 시스템`이라 할만큼 데이터베이스 관리 시스템은 중요하다고 볼 수 있다.
데이터베이스 관리 시스템을 전문적으로 운영하는 인력을 DBA (DataBase Administrator)라 한다.

```
데이터 불일치 문제란?
데이터 불일치 문제는 데이터를 파일로 저장했을 때 파일을 수정하는 도중에 해당 파일을 불러온다면 데이터가 동기화 문제가 발생하여 데이터가 불일치하는 문제가 발생할 수 있다.
```



#### 데이터베이스의 특징

1. 데이터의 `독립성`( 파일 시스템은 데이터와 응용 프로그램이 상호 의존 관계에 있다. )

   - 물리적 독립성 : 데이터베이스 사이즈를 늘리거나 성능 향상을 위해 데이터 파일을 늘리거나 새롭게 추가하더라도 관련된 응용 프로그램을 수정할 필요가 없다.

     (파일 시스템은 응용 프로그램의 기능을 확장하려면 파일의 구조를 재조직해야 한다.)

   - 논리적 독립성 : 데이터베이스는 논리적인 구조로 다양한 응용 프로그램의 논리적 요구를 만족시켜줄 수 있다. 
     ( 파일 시스템에서는 파일의 구조가 응용 프로그램에 반영되어 있기 때문에 파일의 구조가 바뀌면 영향을 받는 모든 응용 프로그램들을 수정해야 한다. )

2. 데이터의 `무결성`
   여러 경로를 통해 잘못된 데이터가 발생하는 경우의 수를 방지하는 기능으로 데이터의 유효성 검사를 통해 데이터의 무결성을 구현하게 된다.

   ( 파일 시스템은 응용 프로그램 별로 제약 조건을 하나하나 처리해야하기 때문에 무결성을 유지하기가 어렵다. )

3. 데이터의 `보안성`
   인가된 사용자들만 데이터베이스나 데이터베이스 내의 자원에 접근할 수 있도록 계정 관리 또는 접근 권한을 설정함으로써 모든 데이터에 보안을 구현할 수 있다.

   ( 파일 시스템은 파일 단위로 검색, 갱신, 실행 등의 권한을 부여할 수 있어서 사용자 별 세밀한 접근 제어가 어렵다.)

4. 데이터의 `일관성`
   연관된 정보를 논리적인 구조로 관리함으로써 어떤 하나의 데이터만 변경했을 경우 발생할 수 있는 데이터의 불일치성을 배제할 수 있다. 또한 작업 중 일부 데이터만 변경되어 나머지 데이터와 일치하지 않는 경우의 수를 배제할 수 있다. 
   ( 파일 시스템에서는 중복된 데이터를 변경하는 게 어렵기 때문에 중복 데이터 중 일부만 변경된다고 하면 중복 데이터 간에 불일치가 발생할 수 있다. )

5. 데이터 `중복 최소화`
   데이터베이스는 데이터를 통합해서 관리함으로써 파일 시스템의 단점 중 하나인 자료의 중복과 데이터의 중복성 문제를 해결할 수 있다.

   ( 파일 시스템은 응용 프로그램별로 데이터를 파일로 관리하기 때문에 같은 데이터가 여러 파일에 저장되어 데이터 중복 문제가 발생할 수 있다. )

   

#### 데이터베이스의 장단점

- ##### 데이터베이스 장점

1. 데이터 중복 최소화
2. 데이터 공유
3. 일관성, 무결성, 보안성 유지
4. 최신의 데이터 유지
5. 데이터의 표준화 가능
6. 데이터의 논리적, 물리적 독립성
7. 용이한 데이터 접근
8. 데이터 저장 공간 절약

- ##### 데이터베이스 단점

1. 데이터베이스 전문가 필요
2. 많은 비용 부담
3. 데이터 백업과 복구가 어려움
4. 시스템의 복잡함
5. 대용량 디스크로 엑세스가 집중되면 과부하 발생

<br>

### 데이터베이스 모델

#### 계층형 데이터 모델 

<img src="데이터베이스\계층형.png">

- 트리 형태의 수직적인 데이터 모델이다.  

-  1:N의 대응 관계만 존재한다. 

-  상위 레코드 삭제시 연쇄 삭제(Triggered Delete)가 일어난다. 

- 개체들 간에는 Cycle이 허용되지 않는다. 

- 관계형 모델에서의 Entity를 계층형에선 Segment라 부른다.  

  ```
  데이터베이스 엔티티(DataBase Entity)란?
  
  사전적 의미의 엔티티(Entity) : 실체, 실재, 객체
  데이터베이스에서 한 건의 자료를 구성하는 레코드를 말한다. 엔티티 사이의 관계를 릴레이션(relationship)이라 하고, 이것을 도표로 나타낸 것을 ERD(Entity Relationship Diagram)라고 한다.
  ```

- 파일 시스템을 생각하면 이해하기 쉽다. 폴더 안에 하위 폴더 안에 파일이 있는 그런 형태이다. 여러 하위 폴더가 한 상위폴더에 있을 수는 있지만 한 하위폴더가 여러 상위폴더에 위치할 순 없다. 

- 대표적인 DBMS는 IBM의 IMS가 있다.

#### 네트워크형 데이터 모델

<img src="데이터베이스\네트워크형.png">

- 계층형의 단점을 좀 더 보완한 데이터 모델이다. 
- 상하위 레코드 사이에서 N:N구조를 허용한다. 
- CODASYL이란 회사에서 DBTG라는 데이터베이스르 출시하며 제안한 모델로, CODASYL DBTG모델이라고 불리기도 한다. 
- 정확한 비유는 아니지만, 바로가기(링크)가 자유롭게 사용되는 파일 시스템을 떠올리면 어떤 계층형에 비해 어떤 보완이 이루어졌는지 이해하기 쉽다. 하위에서 상위로의 이동이 자유로우며 여러 상위 계층으로의 이동도 자유로운 것이다.
- 여기선 상하위 관계를 Owner, Member라고 표현한다. 
- 대표적인 DBMS는 DBTG, EDBS, TOTAL등이 있다.

#### 관계형 데이터 모델

<img src="데이터베이스\관계형.png">

- 계층형, 네트워크형의 단점을 보완한 현재 가장 이상적인 모델이다. 
- 우리가 흔히 보는 Table(표)들로 구성되고 표의 칼럼간 관계가 정의되는 구조의 DB가 관계형 데이터모델이다.
- 대표적인 DBMS로 오라클, MySQL, SQLite등 우리가 아는 거의 모든 데이터 베이스들이 여기 속한다. 
- 거의 표준에 가까우므로 DBMS간 변환이 용이하다. 
- 단점으론, 보는 우리는 편한데 구현이 쉽진 않다. 많은 연산에 대해 계층형이나 네트워크형보다 퍼포먼스가 떨어지는 경우가 많다.





### 데이터베이스의 성능

#### 성능 개선 절차

데이터베이스 성능 튜닝 방법론은 튜닝 작업에 필요한 여러 가지 수행 방법과 이러한 작업들을 효율적으로 수행하려는 과정에서 필요한 각각의 단계들을 체계적으로 정리하여 표준화한 것으로써 분석, 이행, 평가 3단계를 거쳐 성능 최적화의 목적을 달성하기 위한 단계별 접근 전략이다.



##### 1. 분석

튜닝 분석 단계에서는 자료 수집과 목표 설정이라는 2단계로 나뉜다.

###### 자료 수집

데이터베이스 모니터링과 데이터베이스 객체 현황 파악 및 물리 설계 요소에 대해 성능과 관련된 지표들을 분석하기 위한 기초 자료를 수집하는 단계이다.

###### 목표 설정

수집된 기초 자료를 통해 데이터 모델 분석, 액세스 패스 분석, 시스템 자원 현황 분석, SQL 성능 분석, SQL 효율 분석 등을 종합하여 성능상에 병목이나 지연 등과 같은 문제 요소 등을 구체적으로 파악하고 성능 튜닝의 대상이 되는 목표들을 구체화하여 방향을 설정하는 단계이다.



##### 이행

튜닝 이행 단계에서는 성능상의 문제 요소로 파악된 대상에 대해 최적화 방안을 수립하고 적용하는 단계이다.

- 데이터베이스 파라미터(Parameter) 조정
- 전략적인 저장 기법 적용을 위한 물리 설계 및 디자인 검토
- 비효율적으로 수행되는 SQL 문에 대한 최적화
- 네트워크 부하 등을 고려한 데이터베이스 분산 구조에 대한 최적화
- 적절한 인덱스 구성 및 사용을 위한 인덱스 설계 등의 최적화 작업



##### 평가

튜닝 평가 단계에서는 분석 단계에서 진단을 통해 분류된 문제 요소들에 대해 설정된 개선 목표와 이행단계에서 구체적인 튜닝 작업을 수행한 후의 성과를 비교 측정하는 단계이다. 튜닝 목표와 튜닝성과에 차이가 있다면 그 요소들을 파악한 후 목표와 성과를 합치시키는 과정을 거친다.



<br>

<hr>

**왜 굳이 DB 로 관리하기 시작했을까?**

그 이유는 파일 단위로 저장할때, 데이터 종속성 문제와 중복성, 데이터 무결성 문제가 존재하기 때문이다.

**데이터베이스의 특징**

1. 데이터 독립성
2. 데이터 무결성
3. 데이터의 보안성
4. 데이터의 일관성
5. 데이터 중복 최소화

**데이터베이스 모델 종류**

관계형 / 네트워크형 / 계층형

<hr>

출처: https://raisonde.tistory.com/entry/시험대비-데이터베이스-모델의-종류와-특징을-쉽게-이해하자 [지식잡식:티스토리]

출처: https://noahlogs.tistory.com/36 [인생의 로그캣:티스토리]